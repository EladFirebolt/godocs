---
layout: default
title: Salesforce
description: Learn how to configure Salesforce as your identity provider to work with SSO authentication for Firebolt. 
great_grand_parent: Guides
grand_parent: Configure security
parent: Configure SSO
---

# Salesforce

### Configure Salesforce application

1. In Salesforce, search for the 'Identity provider' setting. Make sure that 'Identity Provider Setup' is enabled. You can use default certificate. 

2. From the **Identity Provider** page, click **Download Metadata**. Open the downloaded xml file and find the SingleSignOnService binding, Location attribute, which ends with `../HttpPost`. It will look like: `https://<your-salesforce-account>.my.salesforce.com/idp/endpoint/HttpPost`. Save this value to be used as the SignOnURL in Firebolt SSO configuration.
3. Click **Download Certificate**, and convert the downloaded .crt file to PEM format. You could do this using the following command:
```openssl x509 -in original.crt -out sfcert.pem -outform PEM```
where ```original.crt``` is the name of the downloaded .crt file.
4. Click on the provided link to create a new connected app in Salesforce. 
5. You will be redirected to the **Manage Connected Apps / New Connected App** view. Fill in required fields **Connected App Name, API Name** (for instance, type ‘Firebolt’) and **Contact email**.
6. Move to **Web App Settings,** and check the **Enable SAML** box.
7. Fill in the Entity Id field with value: `urn:auth0:firebolt-app-v2:<organization_name>-<provider>`, 
where
- ```<organization_name>``` is the name of the organization in Firebolt, and 
- ```<provider>``` is the IdP name, 'salesforce' in this case
For example: 
`urn:auth0:app-firebolt-v2:acmeorg-salesforce`

8. Fill the ACS URL field with a URL in the following format (contact Firebolt to get your organization_identifier) `https://id.app.firebolt.io/login/callback?connection=<organization_name>-<provider>&organization=<organization_identifier>`
For example:
`https://id.app.firebolt.io/login/callback?connection=acmeorg-salesforce&organization=org_82u3nzTNQPA8RyoM`

9. Keep **Subject Type** as Username, and **Name ID Format** as unspecified. Click **Save**.

#### UI
1. To configure the Firebolt SSO integration with Salesforce via the UI, Navigate to **Configure > SSO** in Firebolt. 

2. Once there, enter your Sign-on URL, Issuer, Provider, Label, Certificate, and field-mappings, where 

- ```signOnUrl```: The sign-on URL, provided by the SAML identity provider, to which Firebolt sends the SAML requests. The URL is IdP-specific and is determined by the identity provider during configuration.
- ```signoutUrl(optional)```: The sign-out URL, provided by the application owner, to be used when the user signs out of the application.```
- ```issuer```: A unique value generated by the SAML identity provider specifying the issuer value.
- ```provider```: The provider's name - for example: ```Salesforce```. 
- ```label```: The label to use for the SSO login button. If not provided, the Provider field value is used. 
- ```certificate```: The certificate to verify the communication between the identity provider and Firebolt. The certificate needs to be in PEM or CER format, and can be uploaded from your computer by choosing **Import certificate** or entered in the text box.
- ```field mapping```: Mapping to your identity provider's first and last name in key-value pairs. If additional fields are required, choose **Add another key-value pair**. Mapping is required for Firebolt to fill in the login’s given and last names the first time the user logs in using SSO. 
      Here’s an example of how to set up field mapping:

      ```json  
        {
            "given_name": "name",
            "family_name": "surname"
        }
      ```

      where the "given_name" (first name) is mapped to the "name" field from the IDP, and the "family_name" (last name) is mapped from the "surname" field.
3. Choose **Update changes**

#### SQL

Values for SQL to create the SSO connection are as follows:
```sql
ALTER ORGANIZATION acmeorg SET SSO = '{
  "signOnUrl": "https://firebolttest-dev-ed.my.salesforce.com/idp/endpoint/HttpPost",
  "issuer": "salesforce",
  "provider": "salesforce",
  "label": "Salesforce Company App",
  "certificate": "<certificate>"
}';
```

where 
- ```signOnURL``` is the SAML 2.0 endpoint value copied during Salesforce setup, 
- ```issuer``` is the name of the issuer, 'salesforce' in this case,
- ```provider``` is the IdP name, 'salesforce' in this case,
- ```label``` is text that will appear on the **Sign in** form (this defaults to ‘<organization_name>-<provider>’ if a value is not provided, for instance ‘acme-salesforce`), and 
- ```certificate``` is the X.509 certificate in PEM format downloaded during setup.
